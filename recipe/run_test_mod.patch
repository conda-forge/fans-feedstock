diff --git a/test/run_tests.sh b/test/run_tests.sh
index a61dd34..2b6517b 100755
--- a/test/run_tests.sh
+++ b/test/run_tests.sh
@@ -6,6 +6,8 @@ if [ $# -ne 2 ] || [ "$1" != "-n" ]; then
     exit 1
 fi
 
+set -euxo pipefail   # <-- Add it HERE
+
 num_processes=$2
 
 # Select executable depending on whether we're inside a conda/pixi env
@@ -29,21 +31,80 @@ FANS_TEST_CASES=(
 TOTAL_TESTS=${#FANS_TEST_CASES[@]}
 passed=0 failed=0 total_time=0 test_num=0
 
+echo "======================================"
+echo " FANS Test Suite"
+echo " num_processes = $num_processes"
+echo " FANS_EXEC     = $FANS_EXEC"
+echo " mpiexec path  = $(which mpiexec || echo 'NOT FOUND')"
+
+set +e
+mpiexec --version
+echo "mpiexec version exit code: $?"
+set -e
+
+echo "FANS_EXEC exists? $( [ -x "$FANS_EXEC" ] && echo YES || echo NO )"
+echo "======================================"
+echo ""
+
+echo "Checking test file locations:"
+echo "  Workdir: $(pwd)"
+echo "  PREFIX: $PREFIX"
+echo "  PKG_NAME: $PKG_NAME"
+echo "  Test dir: $PREFIX/etc/conda/test-files/$PKG_NAME/0"
+
+
 for test_case in "${FANS_TEST_CASES[@]}"; do
     ((test_num++))
-    echo "    Start ${test_num}: ${test_case}"
+    echo "--------------------------------------------------"
+    echo "Test $test_num : $test_case"
+    echo "pwd = $(pwd)"
+
+    # Compute all paths
+    JSON_FILE="$PREFIX/etc/conda/test-files/$PKG_NAME/0/input_files/test_${test_case}.json"
+    OUT_FILE="$PREFIX/etc/conda/test-files/$PKG_NAME/0/output/test_${test_case}.h5"
+    LOG_FILE="$PREFIX/etc/conda/test-files/$PKG_NAME/0/output/test_${test_case}.log"
+
+    echo "JSON_FILE = $JSON_FILE"
+    echo "OUT_FILE  = $OUT_FILE"
+    echo "LOG_FILE  = $LOG_FILE"
+    echo "FANS_EXEC = $FANS_EXEC"
+
+    # Validate presence of required files/directories:
+    if [[ ! -f "$JSON_FILE" ]]; then
+        echo "ERROR: Missing input JSON file:"
+        echo "       $JSON_FILE"
+        exit 1
+    fi
+
+    if [[ ! -x "$FANS_EXEC" ]]; then
+        echo "ERROR: FANS executable not found or not executable:"
+        echo "       $FANS_EXEC"
+        exit 1
+    fi
+
+    mkdir -p "$(dirname "$OUT_FILE")"
+
     start_time=$(date +%s.%N)
-    if command time -v mpiexec -n $num_processes "$FANS_EXEC" input_files/test_${test_case}.json output/test_${test_case}.h5 > output/test_${test_case}.log 2>&1; then
-        status="Passed" && ((passed++))
+
+    # Run with tee so output is visible and also logged
+    if command time -v \
+        mpiexec -n "$num_processes" "$FANS_EXEC" "$JSON_FILE" "$OUT_FILE" \
+        2>&1 | tee "$LOG_FILE"
+    then
+        status="Passed"; ((passed++))
     else
-        status="***Failed" && ((failed++))
+        status="***Failed"; ((failed++))
     fi
+
     end_time=$(date +%s.%N)
     elapsed=$(echo "$end_time - $start_time" | bc)
     total_time=$(echo "$total_time + $elapsed" | bc)
-    printf "%d/%d Test #%d: %-30s %s %7.2f sec\n" $test_num $TOTAL_TESTS $test_num "$test_case" "$status" $elapsed
+
+    printf "%d/%d Test #%d: %-30s %s %7.2f sec\n" \
+        "$test_num" "$TOTAL_TESTS" "$test_num" "$test_case" "$status" "$elapsed"
 done
 
+
 echo ""
 [ $failed -eq 0 ] && echo "100% tests passed, 0 tests failed out of $TOTAL_TESTS" || echo "$(echo "scale=0; 100 * $passed / $TOTAL_TESTS" | bc)% tests passed, $failed tests failed out of $TOTAL_TESTS"
 printf "\nTotal Test time (real) = %.2f sec\n" $total_time
